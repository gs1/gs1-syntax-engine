<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Namespace GS1.Encoders </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Namespace GS1.Encoders ">
    
    <meta name="description" content="GS1 Barcode Syntax Engine - C# wrapper.">
      <link rel="shortcut icon" href="favicon.ico">
      <link rel="stylesheet" href="styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="styles/docfx.css">
      <link rel="stylesheet" href="styles/main.css">
      <meta property="docfx:navrel" content="toc.html">
      <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="GS1.Encoders">

  <h1 id="GS1_Encoders" data-uid="GS1.Encoders" class="text-break">Namespace GS1.Encoders</h1>
  <div class="markdown level0 summary"><p>GS1 Barcode Syntax Engine - C# wrapper.</p>
</div>
  <div class="markdown level0 conceptual">
<p>The GS1 Barcode Syntax Engine provides routines that support the processing of GS1
syntax data, including Application Identifier element strings and GS1
Digital Link URIs, whether these are provided in raw or human-friendly
format or as normalised scan data received from barcode readers.</p>
<p>The implementations are intended for use with GS1 standards and applications
and do not contain additional features that might be required for more
general use.</p>
<p>Within the GS1 Application Identifier system, structured data is represented
in different formats depending upon the context.</p>
<p>The data formats supported by this library are:</p>
<ul>
<li><strong>Bracketed AI element strings</strong>: Human-friendly rendition of AI data as a single string using numerical AIs.</li>
<li><strong>Unbracketed AI element strings</strong>: Rendition of AI data that corresponds most directly to encoded barcode data.</li>
<li><strong>GS1 Digital Link URIs</strong></li>
<li><strong>Scan data</strong>: The expected result of scanning a symbol with a barcode reader that has AIM symbologies identifiers enabled.</li>
<li><strong>Human Readable Interpretation (HRI)</strong>: Human-friendly redition of the AI data contained within a symbol. This may also include Data Titles to present the AI data in the form of &quot;mixed HRI/non-HRI text&quot;. (Output only.)</li>
</ul>
<p>The following diagram shows how the library can be used for processing and
transformation of GS1 data, indicating which formats are accepted as input,
how barcode message data is generated and AI data extracted from the
provided input data, and how the given data can be output in various
formats.</p>
<p><img src="../input_output_buffers.svg" alt="Data transformation: Inputs, outputs and buffers"></p>
<p>The above diagram highlights that conceptually the library contains two internal &quot;data buffers&quot;:</p>
<ul>
<li><strong>Barcode message buffer:</strong> This is populated with the raw message
that would be borne by a GS1 barcode symbol that represents the input
data, e.g. unbracketed AI syntax with FNC1 in first for regular AI
element strings; plain string for a plain data or a GS1 Digital Link
URI.</li>
<li><strong>Extracted AI buffer:</strong> This contains the in-order AI data that was
extracted from the input data.</li>
</ul>
<p>The main operations of the library involve reading and updating the state of
these buffers.</p>
<h2 id="quick-start">Quick start</h2>
<p>To use the library you must first build the native library and include the wrapper within your .NET project.</p>
<h3 id="building-the-native-library">Building the native library</h3>
<p>You must first build the native library by opening a Developer Command Prompt
and running:</p>
<pre><code>msbuild gs1encoders.sln /t:gs1encoders /p:Configuration=Release /p:Platform=x86
</code></pre>
<p>This will generate <code>src\c-lib\build\library\Win32\Release\gs1encoders.dll</code>.</p>
<h3 id="using-the-wrapper-in-your-own-project">Using the wrapper in your own project</h3>
<p>To use the wrapper in your C# project you must:</p>
<ol>
<li>Include the wrapper source within your project</li>
<li>Ensure <code>gs1encoders.dll</code> (the native library) is in the same directory as your executable or in a location on your system PATH</li>
</ol>
<p>For a minimal example, create a console application as follows:</p>
<pre><code>dotnet new console -n MyApp -f net8.0
cd MyApp
</code></pre>
<p>Edit <code>MyApp.csproj</code> to include the wrapper source and deploy the native
library:</p>
<pre><code class="lang-xml">&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net8.0&lt;/TargetFramework&gt;
    &lt;PlatformTarget&gt;x86&lt;/PlatformTarget&gt;
  &lt;/PropertyGroup&gt;
  &lt;ItemGroup&gt;
    &lt;Compile Include=&quot;&lt;path\to\src\dotnet-lib\GS1Encoder.cs&gt;&quot; Link=&quot;GS1Encoder.cs&quot; /&gt;
  &lt;/ItemGroup&gt;
  &lt;ItemGroup&gt;
    &lt;None Include=&quot;&lt;path\to\src\c-lib\build\library\Win32\Release\gs1encoders.dll&gt;&quot;&gt;
      &lt;CopyToOutputDirectory&gt;PreserveNewest&lt;/CopyToOutputDirectory&gt;
    &lt;/None&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre>
<p>Edit <code>Program.cs</code> to contain:</p>
<pre><code class="lang-csharp">using System;
using GS1.Encoders;

GS1Encoder gs = new GS1Encoder();
Console.WriteLine(&quot;GS1 Syntax Engine version: &quot; + gs.Version);
</code></pre>
<p>Run your application:</p>
<pre><code>dotnet run
</code></pre>
<p>For a comprehensive example WPF-based desktop application, see
<a href="https://github.com/gs1/gs1-syntax-engine/tree/main/src/dotnet-app">dotnet-app</a>.</p>
<h2 id="example-uses">Example uses</h2>
<p>The following are examples of how to use the library.</p>
<p>Unless otherwise specified, the getter properties return library-managed
data that must not be modified by the user. If their content must persist
following a subsequent call to the same instance of the library then they
must be copied to a user-managed variable.</p>
<p>Most of the setter properties and action methods of this library throw exceptions
in the event of failure. Production code should catch these exceptions and
handle them appropriately, which might include rendering the error message to
the user.</p>
<h3 id="gs1-ai-data-validation-and-extraction-including-gs1-digital-link">GS1 AI data validation and extraction (including GS1 Digital Link)</h3>
<p>The following code processes AI data input, validates it (reporting any
failures) and displays the extracted AIs if the validation succeeds.</p>
<pre><code class="lang-csharp">GS1Encoder gs = new GS1Encoder();                       // Create a new instance of the library

// gs.PermitUnknownAIs = true;                          // Uncomment only if it is necessary to handle AIs
                                                        // that are not known to the library

// Input provided as a bracketed AI element string
//
try
{
    gs.AIdataStr = &quot;(01)12312312312333(10)ABC123(99)TEST&quot;;
}
catch (Exception e)
{
    Console.Error.WriteLine(&quot;ERROR: &quot; + e.Message);     // Display a descriptive error message
    string errMarkup = gs.ErrMarkup;
    if (!string.IsNullOrEmpty(errMarkup))               // Display the invalid AI in the case of a Linting failure
        Console.Error.WriteLine(&quot;Bad AI data: &quot; + errMarkup);
    // Finally, handle the error in an application-specific way
    Environment.Exit(1);
}

// Alternatively, the input may be given in the following formats:
//
// gs.DataStr = &quot;^011231231231233310ABC123^99TEST&quot;;     // Unbracketed element string, &quot;^&quot; = FNC1
//
// gs.DataStr = &quot;https://example.com/01/12312312312333/10/ABC123/99/TEST&quot;;   // GS1 Digital Link URI
//
// gs.ScanData = &quot;]Q1011231231231233310ABC123\u001D99TEST&quot;;   // Barcode scan data, containing a &quot;GS&quot; (ASCII 0x1D) separator

foreach (string line in gs.HRI)                         // Display the extracted AI data as HRI text
{
    Console.WriteLine(line);
}
</code></pre>
<h3 id="converting-an-ai-element-string-to-barcode-message-data">Converting an AI element string to barcode message data</h3>
<p>In this example we process a bracketed AI element string to convert it into
barcode message data, suitable for carrying in a GS1 barcode symbol.</p>
<pre><code class="lang-csharp">GS1Encoder gs = new GS1Encoder();

try
{
    gs.AIdataStr = &quot;(01)12312312312333(10)ABC123(99)TEST&quot;;    // Accept a bracketed AI element string
}
catch (Exception)
{
    // Handle error and return
}

Console.WriteLine(gs.DataStr);                          // Render the barcode message buffer
</code></pre>
<p><strong>Note:</strong> The barcode message data read and emitted by this library uses a harmonised
format that does not concern itself with internal encoding quirks of various
symbologies. In the harmonised barcode message data:</p>
<ul>
<li>A leading <code>&quot;^&quot;</code> always indicates GS1 Application Identifier syntax data,
i.e. a notional FNC1 in first character position. (This is even true for
DotCode in whose <em>internal encoding</em> the literal FNC1 non-data character
may have an inverted meaning for certain messages depending upon their
regular data content.)</li>
<li>A <code>&quot;^&quot;</code> at any other position represents a notional FNC1 non-data
Application Identifier separator character. (This is even the case for QR
Code in whose <em>internal encoding</em> a <code>&quot;%&quot;</code> character or <code>&quot;{GS}&quot;</code> character
takes on the AI separator role typically assigned to the FNC1 non-data
character, depending upon the effectuve encodation mode.)</li>
</ul>
<p>Additionally, barcode image encoder libraries have differing conventions for
how to input FNC1 characters, extending to whether it is necessary to be
explicit about the notional FNC1 character in the first position when
specifying a GS1 Application Identifier syntax symbol.</p>
<p>Consequently, the barcode message data emitted by this library may need to
be post-processed to align to the specific requirements of whatever symbol
generation library is in use.</p>
<h3 id="barcode-scan-data-processing">Barcode scan data processing</h3>
<p>In this example we process scan data from a barcode reader to extract the AI
data.</p>
<pre><code class="lang-csharp">GS1Encoder gs = new GS1Encoder();

// Disable validation of mandatory association between AIs if the symbol may
// be one of multiple on a label
gs.SetValidationEnabled(Validation.RequisiteAIs, false);

try
{
    gs.ScanData = &quot;]Q1011231231231233310ABC123\u001D99TEST&quot;;
}
catch (Exception)
{
    // Handle error and return
}

foreach (string line in gs.HRI)
{
    Console.WriteLine(line);
}

// If it is necessary to know the &quot;symbology&quot; that was scanned then this can
// be read using Sym, however note the caveats given in the
// description of ScanData
</code></pre>
<p><strong>Note:</strong> It is required that AIM Symbology Identifiers are enabled on the barcode
reader, and that the scanned barcode message &quot;survives the channel&quot; intact,
i.e. that no character substitutions have been made by the reader, in
particular that any embedded FNC1 separator characters are correctly
represented by GS characters (ASCII 29). If this is not the case then the
scanned data should be pre-processed to meet this requirement.</p>
</div>
  <div class="markdown level0 remarks"></div>
    <h3 id="classes">
Classes
</h3>
      <h4><a class="xref" href="GS1.Encoders.GS1Encoder.html">GS1Encoder</a></h4>
      <section><p>Main class for processing GS1 barcode data, including validation, format conversion, and generation of outputs such as GS1 Digital Link URIs and Human-Readable Interpretation text.</p>
</section>
      <h4><a class="xref" href="GS1.Encoders.GS1EncoderDigitalLinkException.html">GS1EncoderDigitalLinkException</a></h4>
      <section><p>A custom exception class that is thrown to indicate an error processing
GS1 Digital Link data.</p>
</section>
      <h4><a class="xref" href="GS1.Encoders.GS1EncoderEncodeException.html">GS1EncoderEncodeException</a></h4>
      <section><p>A custom exception class that is thrown to indicate a problem generating
a barcode symbol.</p>
</section>
      <h4><a class="xref" href="GS1.Encoders.GS1EncoderGeneralException.html">GS1EncoderGeneralException</a></h4>
      <section><p>A custom exception class that is thrown to indicate a general problem
initialising the library, such as when the dynamic-link library isn't accessible.</p>
</section>
      <h4><a class="xref" href="GS1.Encoders.GS1EncoderParameterException.html">GS1EncoderParameterException</a></h4>
      <section><p>A custom exception class that is thrown to indicate a problem with barcode
options that are being set.</p>
</section>
      <h4><a class="xref" href="GS1.Encoders.GS1EncoderScanDataException.html">GS1EncoderScanDataException</a></h4>
      <section><p>A custom exception class that is thrown to indicate an error processing
barcode scan data.</p>
</section>
    <h3 id="enums">
Enums
</h3>
      <h4><a class="xref" href="GS1.Encoders.GS1Encoder.Symbology.html">GS1Encoder.Symbology</a></h4>
      <section><p>Recognised GS1 barcode formats (&quot;symbologies&quot;) for processing scan data.</p>
</section>
      <h4><a class="xref" href="GS1.Encoders.GS1Encoder.Validation.html">GS1Encoder.Validation</a></h4>
      <section><p>Optional AI validation procedures that may be applied to detect invalid inputs.</p>
</section>


</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      
      <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
